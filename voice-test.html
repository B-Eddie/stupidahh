<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Goose Voice System Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="vendor/aframe-extras.min.js"></script>
</head>

<body style="margin: 0">
    <div style="position: fixed; top: 10px; left: 10px; color: white; font-family: monospace; z-index: 100; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 5px;">
        <h3>Goose Voice Test</h3>
        <p>Walk close to the geese to hear them roast you!</p>
        <p>Controls: WASD to move, mouse to look</p>
    </div>

    <a-scene
        renderer="antialias: true; physicallyCorrectLights: true"
        background="color: #1c1f24"
        cursor="rayOrigin: mouse"
    >
        <!-- Lighting -->
        <a-entity light="type: hemisphere; intensity: 0.6"></a-entity>
        <a-entity light="type: directional; intensity: 0.8" position="1 3 2"></a-entity>

        <!-- Ground -->
        <a-plane
            rotation="-90 0 0"
            width="50"
            height="50"
            position="0 0.01 0"
            material="color: #2a2a2a; roughness: 0.8"
        ></a-plane>

        <!-- Player -->
        <a-entity
            id="rig"
            movement-controls="fly: false; speed: 0.14"
        >
            <a-entity
                id="camera"
                camera
                position="0 1.6 0"
                look-controls="pointerLockEnabled: true"
            ></a-entity>
        </a-entity>

        <!-- Test Geese -->
        <a-entity
            id="testGoose1"
            position="5 0.5 5"
            scale="0.35 0.35 0.35"
            gltf-model="assets/goose.glb"
            goose-proximity-voice="proximityRadius: 4.0; target: #rig; enabled: true"
        ></a-entity>

        <a-entity
            id="testGoose2"
            position="-5 0.5 5"
            scale="0.35 0.35 0.35"
            gltf-model="assets/goose.glb"
            goose-proximity-voice="proximityRadius: 4.0; target: #rig; enabled: true"
        ></a-entity>

        <a-entity
            id="testGoose3"
            position="0 0.5 -5"
            scale="0.35 0.35 0.35"
            gltf-model="assets/goose.glb"
            goose-proximity-voice="proximityRadius: 4.0; target: #rig; enabled: true"
        ></a-entity>

        <!-- Visual indicators for proximity zones -->
        <a-entity position="5 0.01 5">
            <a-ring radius-inner="3.5" radius-outer="4.5" rotation="-90 0 0" material="color: #ff0000; opacity: 0.3; transparent: true"></a-ring>
        </a-entity>
        <a-entity position="-5 0.01 5">
            <a-ring radius-inner="3.5" radius-outer="4.5" rotation="-90 0 0" material="color: #ff0000; opacity: 0.3; transparent: true"></a-ring>
        </a-entity>
        <a-entity position="0 0.01 -5">
            <a-ring radius-inner="3.5" radius-outer="4.5" rotation="-90 0 0" material="color: #ff0000; opacity: 0.3; transparent: true"></a-ring>
        </a-entity>
    </a-scene>

    <script>
        window.aframeReady = function (cb) {
            if (window.AFRAME) return cb();
            const check = () => {
                if (window.AFRAME) {
                    cb();
                } else {
                    requestAnimationFrame(check);
                }
            };
            check();
        };
    </script>
    <script src="gooseVoice.js" defer></script>
</body>
</html>
